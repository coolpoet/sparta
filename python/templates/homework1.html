<html>
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <link href="{{url_for('static', filename='mystyle.css')}}" rel="stylesheet">


  <title> Buy John Nice Lunch</title> 



  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


  <script>


    function posting() {
      $.ajax ({
        type: "POST",
        url: "/order",
        data: {
          name_give: $('#myName').val(),
          email_give: $('#myEmail').val(),
          phone_give: $('#myNumber').val(),
          comment_give: $('#myComment').val()},

        success: function(response) {
          window.location.reload();  
        }
      })
    }
  
    $(document).ready(function(){
      $('#order_list').empty();
      listing();
    });


     function listing() {
      $.ajax ({
        type: "GET",
        url: "/order",
        data: {},
        success: function(response) {
          let order = response["order"];
          for (let i=0; i < order.length; i++) {
            let name = order[i]['name'];
            let email = order[i]['email'];
            let phone = order[i]['phone'];
            let comment = order[i]['comment'];
            
            let temp_html = `<tr>\
            <td>${name}</td>\
            <td>${email}</td>\
            <td>${phone}</td>\
            <td>${comment}</td>\
            </tr>`;
            console.log(temp_html)
            $('#order_list').append(temp_html);
          }
        }
      })
    }




  
  </script>
  
  <style>
  
   .carousel-wrap {
    width: 900px;
    margin: auto;
  }

  .input-wrap-all {
    width: 900px;
    margin: 30px auto;
  }

  .mytext {
    width: 900px;
    margin: 30px auto;
    color: navy;
    text-align: center;

  }

  .table {
    width: 900px;
    margin: 100px auto;
  }
  
  </style>

</head>

<body>

  <!--carousel-->

  <div class="carousel-wrap">
   <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
      <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
      <div class="carousel-item active">
        <img class="d-block w-100" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQlmdhuqApNt1yU-nddV9r1m19ohSjHziCKE96hrwT-o46RtZbS" alt="First slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="https://live.staticflickr.com/3812/9022227067_1eb758c927_b.jpg" alt="Second slide">
      </div>
      <div class="carousel-item">
        <img class="d-block w-100" src="https://lh3.googleusercontent.com/proxy/q9UR5JnRM7sqW-J9Hy2zAT3ZUBm7Kf5TihWfB7GoF6BxTIgJOhv0sZWQMuPaQeSR7MoTQRs51q9yc7sphy3Upfq-vEeK0q0qoxIAuTzQSnAfc5bHgg" alt="Third slide">
      </div>
    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>

<div class="mytext">

  <h1>John에게 JMT 점심을 사주세요!</h1>
  <h3>점심 사주기 신청</h3>

</div>

<!-- input -->

<div class="input-wrap-all">

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" id="name_add">이름</span>
    </div>
    <input id="myName" type="text" class="form-control" placeholder="이름" aria-label="Username" aria-describedby="basic-addon1">
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" id="email_add">이메일</span>
    </div>
    <input id="myEmail" type="text" class="form-control" placeholder="메일주소" aria-label="Username" aria-describedby="basic-addon1">
  </div>

  <div class="input-group mb-3">
    <div class="input-group-prepend">
      <span class="input-group-text" id="phone_add">전화번호</span>
    </div>
    <input id="myNumber" type="text" class="form-control" placeholder="000-0000-0000 으로 작성" aria-label="Username" aria-describedby="basic-addon1">
  </div>


  <div class="input-group">
    <div class="input-group-prepend" >
      <span class="input-group-text" id="comment_add">가능일시</span>
    </div>
    <textarea id ="myComment" class="form-control" aria-label="With textarea"></textarea>
    <button type="button" class="btn btn-primary" onclick="posting()" placeholder="2월 12일 오후12시">신청하기</button>
  </div>
</div>
<table class="table">
  <thead>
    <tr>
      <th scope="col">이름</th>
      <th scope="col">이메일</th>
      <th scope="col">전화번호</th>
      <th scope="col">가능일시</th>
    </tr>
  </thead>
  <tbody id="order_list">
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table>


</body>
</html>
